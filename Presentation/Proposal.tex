%\documentclass[12pt,handout]{beamer}
\documentclass{beamer}

\usepackage{pgfpages}
\usepackage{setspace}
\usepackage{tipa}
\usepackage{algorithmic}
\usepackage{pgfgantt}

%\setbeameroption{show notes on second screen}
    %   OR
%\pgfpagesuselayout{8 on 1}[a4paper,border shrink=5mm]
%\setbeameroption{show notes}


\title[Practical Speech Enhancement in Babble using NMF]
{Practical Speech Enhancement in Babble using Non-negative Matrix Factorisation}
\author{Ashley~Gillman}
%\institute{James Cook University}
\institute[James Cook University \hspace{2em} \insertframenumber/\inserttotalframenumber]{James Cook University} % include slide no. in footer

\usetheme{Szeged}
\usecolortheme{crane}

\begin{document}

  \begin{frame}
    \titlepage
    %\note{*\emph{holding phone}* Why is it that at home I could get my voice to text working, but I can't up in the thesis room with all my fellow students talking loudly?\par}
    \begin{tabular*}{\textwidth}{@{\extracolsep{\fill} }l r}
      \emph{Partner:} Bryan~Quill & \emph{Supervisor:} Dr.~Owen~Kenny
    \end{tabular*}
    \note{Hello ladies and gentlemen. As I'm sure most of you are aware, my name is Ashley Gillman. My thesis partner is Bryan Quill, who will follow me, and my supervisor is the handsome Owen Kenny. Today I'd like to propose to you my thesis project, which I am sure you will consider exciting and worthy of consideration. \par}
    \note{The title of my project is "Pracitcal Speech Enhancement in Babble using Non-negative Matrix Factorisation"}
  \end{frame}

  \section{Introduction}
  \subsection{}

  \begin{frame}
    \frametitle{What is Babble?}
    \framesubtitle{And why is it so interesting?}
    \begin{center}
      {\footnotesize
        \begin{tabular}{ | p{1.5cm} | p{1.5cm} | p{4cm} | p{2.3cm} | } \hline
          \textbf{Type of Noise} & \textbf{No. of Speakers} & \textbf{Definition} & \textbf{Steady-state / Time-varying} \\ \hline
          Competing Speaker & 2 & There are two speakers present. & Time-varying \\ \hline
          Babble & 3 - 6 & Individual speakers can be heard and at times, individual words can also be heard. & Time-varying \\ \hline
          Speech-shaped (Crowd) & 7+ & A diffused background rumble, where individual conversations or speakers are not distinguishable. & Steady-state \\ \hline
        \end{tabular}
      }
    \end{center}
    \note{There are a number of different classifications of speech related noise, depending on the number of speakers present.\par Babble is where there are a number of speakers, but few enough that they can each be heard individually.\par}
    \note{Removing babble is considered to be the holy grail of speech enhancement as the competing noise has similar spectral characteristics to the desired signal.\par}
  \end{frame}

  \begin{frame}
    \frametitle{A bit of History...}
    \framesubtitle{The cocktail party effect}
    \centerline{\includegraphics[height = 5.8cm]{chart/cocktailParty.jpg}}
    {\tiny
      \begin{spacing}{0.5}
        By David Shankbone (Own work) [CC-BY-3.0 (http://creativecommons.org/licenses/by/3.0)],\par via Wikimedia Commons
      \end{spacing}
    }
    %``\textbf{The cocktail party effect}'' describes the difficulty in hearing against multiple competing speakers.
    \note{The difficulty of identifying speech in babble noise is often referred to as the cocktail party effect.\par}
    \note{The cocktail party effect gained scientific interest by Colin Cherry in the 1950s after pilots reported issues hearing air traffic controllers due to others speaking near the microphone.\par}
  \end{frame}

  \section{Research Question 1}
  \subsection{Introduction}

  \begin{frame}
    \frametitle{The first issue:}
    \centerline{\includegraphics[height = 6.5cm]{chart/assessmentMethods.eps}}
    \note{Applications of speech enhancement algorithms can be broadly classified into two categories:\par}
    \note{$\bullet$improving human recognition (telecomm, hearing aid)\par}
    \note{$\bullet$and those for improving machine recognition (TV, mobile).\par}
    \note{However, most papers don't form a distinction between these two types of recognition.\par}
    \note{Talk about graph\par}
    \note{Issue: because machine listeners are fundamentally different from human listeners.}
  \end{frame}

  \subsection{Definition}

  \begin{frame}
    \frametitle{Research Question 1}
    {\Large ``Are good enhancement algorithms effective for both human listeners and machine listeners?''}\par
    \emph{Can a generic and practical speech enhancement algorithm find application in signal enhancement and ASR?}
    \note{This leads us to my first research question.\par}
    \note{This research involves investigating the link between human recognition and machine recognition.\par}
    \note{Does an algorithm that improves enhancement for human listeners necessarily provide enhancement for a machine listener? And vice-versa.}
  \end{frame}

  \subsection{Methodology}

  \begin{frame}
    \frametitle{Evaluation Measures}
    \begin{itemize}
      \item<-3>{Mean Opinion Score (MOS) - \emph{Human listener}}
      \item{\color<1>{gray}Perceptual Evaluation of Speech Quality (PESQ) - \emph{Human listener}}
      \item{\color<-2>{gray}Automated Speech Recognition Word Recognition Rate (ASR-WRR) - \emph{Machine listener}}
    \end{itemize}
    \note{In order to answer this question I will have to test a number of algorithms against both human listeners and machine listeners.\par}
    \note{I have selected three standard evaluation measures.\par}
    \note{MOS is a standardised format where listeners are asked to subjectively evaluate the quality on a scale 1 to 5.\par}
    \note{PESQ is an objective algorithm used predominantly to evaluate speech quality of telecommunications systems, but is effective for speech enhancement systems.\par}
    \note{And finally, the word recognition rate achieved by an ASR system directly shows the improvement of a machine listener. A number of different ASR systems are to be used.}
  \end{frame}

  \section{Research Question 2}
  \subsection{Introduction}

  \begin{frame}
    \frametitle{Crash Course in Spectrograms}
    \centerline{
      \includegraphics<1>[height = 6cm]{chart/formSTFT1.eps}
      \includegraphics<2>[height = 6cm]{chart/formSTFT2.eps}
      %\includegraphics<3>[height = 6cm]{chart/formSTFT3.eps}
      \includegraphics<3>[height = 6cm]{chart/formSTFT4.eps}
      \includegraphics<4>[height = 6cm]{chart/formSTFT5.eps}
    }
      \note{We apply NMF to signals by using short time Fourier transforms, or spectrograms.\par}
      \note{To form a spectrogram, we split up a signal into small slices, generally 20 to 40 ms.\par}
      \note{We then take the Fourier transforms of the slices, and flip the x and y axes.\par}
      \note{Finally we assign the magnitude of the Fourier transforms to the colour, or z-axis, leaving the frequency on the y-axis and the time on the x-axis.\par}
  \end{frame}

  \begin{frame}
    \frametitle{Non-negative Matrix Factorisation}
    \centerline{\includegraphics[width = 12cm]{chart/NMF.eps}}
    {\tiny
      \begin{spacing}{0.5}
        Adapted from Qwertyus (Own work) [CC-BY-SA-3.0 (http://creativecommons.org/licenses/by-sa/3.0)],\par via Wikimedia Commons
      \end{spacing}
    }
    \note{You may have noticed my thesis title states "Using Non-negative Matrix Factorisation", but what is Non-negative Matrix Factorisation?\par}
    \note{NMF is a method of matrix decomposition. This means decomposing, or factorising, a matrix into two or more components.\par}
    \note{We perform NMF on the spectrogram of our signal, X, which we will cover shortly.\par}
    \note{Doing this allows us to break out the basic building blocks of speech, or the components, into our V matrix, and the time-varying activations of the components into W.\par}
    %\note{If we introduce some building blocks for our speech signal, and some for our noise, we can reproduce the speech by using only the activations we find that are associated with that signal.\par}
  \end{frame}

  \subsection{Definition}

  \begin{frame}
    \frametitle{Research Question 2}
    \note{My second research Q involves an attempt to provide an improvement in the accuracy and efficiency of such algorithms.\par}
    {\Large ``Can the results be improved by modifying algorithms to concentrate the focus on recognition of the desired speakers voice?''}
    \note{I propose a method of using phonemes as the building blocks in order to improve the algorithms recognition of the speaker against babble.\par}
  \end{frame}

  \subsection{Methodology}

  \begin{frame}
    \frametitle{Phonemes}
    {\large
      \begin{spacing}{1.5}
        \begin{tabular}{r | l}
          Phrase & ``Examine a sentence.'' \\
          Words & ``Examine'' + ``a'' + ``sentence'' \\
          Syllables & /Ex.am.ine/ + /a/ + /sen.tence/ \\
          %Phonemes & (IH G Z AE M IH N) + (AH) + (S EH N T AH N S) \\
          Phonemes & \textipa{/I g z \ae{} m I n/ + /9/ + /s E n t 9 n s/} \\
        \end{tabular}
      \end{spacing}
    }
    \note{*\emph{What is a phoneme?}* We all know phrases are made of words, and words are made of syllables. Well syllables are made of phonemes, they are the basic sounds. Phonemes are the natural building blocks of speech.\par}
  \end{frame}

  \begin{frame}
  	\frametitle{Previous Work}
    \centerline{\includegraphics[height = 6cm]{chart/phoneme.png}}
    {\tiny
      \begin{spacing}{0.5}
        B. Raj, R. Singh, and T. Virtanen, ``Phoneme-Dependent NMF for Speech Enhancement in Monaural Mixtures,'' in INTERSPEECH, 2011, pp. 1217-1220.
      \end{spacing}
    }
    \note{I am not the first to exploit this fact, this was done previously by Raj, Singh and Virtanen.\par}
    \note{Shown is an example of their results. The first spectrogram shows a voice mixed with noise, in this case music. The second is the cleaned voice using a standard NMF algorithm, and the bottom shows their algorithm's results. Notice the cleaner spectrogram.\par}
    \note{However, the algorithm was not suitable for babble noise. Their algorithm required phonemes to be recognised first before doing the NMF decomposition. Results did, however, show that phoneme dependent recognition improved results.\par}
    \note{\emph{diagram titles}}
  \end{frame}

  \begin{frame}
    \frametitle{Algorithm}
    \centerline{\includegraphics[width = 12cm]{chart/nmfImplementation.eps}}
    \note{I have based my algorithm on Wilson's algorithm, which is a fairly standard NMF algorithm.\par}
    \note{My proposed modification lies in changing the training stage. Recall that the V matrix contains the "building blocks".\par}
    \note{Rather than using an NMF training algorithm, I will produce the component matrix by drawing out samples of known phonemes.\par}
    \note{I'm not sure exactly how many samples I will have to draw. I suspect around 10, but I will vary this between 1 and 1000.\par}
  \end{frame}

  \section{Research Question 3}
  \subsection{Definition}

  \begin{frame}
    \frametitle{Research Question 3}
    \note{Using phonemes also has a further benefit, as we will soon see.\par}
    \note{My final research question relates to improving the practicality of existing algorithms.\par}
    {\Large ``Can the practicality of existing algorithms be improved to allow applications in end-user hardware?''}
    \note{So why do existing systems need to be more practical?\par}
    \note{The most effective algorithms developed in literature require specific knowledge about the speaker's voice. They need to be trained.\par}
    \note{However, this training process can require a lot a recorded speech, typically about an hour's worth.\par}
  \end{frame}

  \subsection{Need}

  \begin{frame}{Why is this necessary?}
    \centerline{\includegraphics[height = 6cm]{chart/frustration.jpg}}
    {\tiny
      \begin{spacing}{0.5}
        ``Present'' by S B [CC-BY-2.0 (http://creativecommons.org/licenses/by/2.0)], via flickr
      \end{spacing}
    }
    \note{This is generally not acceptable for a mass distributed system, whether the platform be a mobile phone, TV, hearing aid, or otherwise.\par}
    \note{By using the drawn phonemes method I outlined earlier, drawing phonemes to form the building blocks instead of training them up, I hope to be able to vastly reduce the training requirements.\par}
  \end{frame}

  \subsection{Methodology}

  \begin{frame}{Simplified voice training}
    Training requirements: \\
    \footnotesize
    $10$ samples $\div$ $(5 \frac{phonemes}{word} \times 140 \frac{words}{minute} \div 40$ phonemes $\times 20\%$ usability rate{}$)$ \\
    \raggedleft
    $= 2.9$ mins
    \rule{\textwidth}{1pt}
    \begin{minipage}[c][4cm][b]{.5\textwidth}
      \includegraphics[width = .95\textwidth]{chart/prompt.jpg}
    \end{minipage}%
    \begin{minipage}[c][4cm][c]{.5\textwidth}
      \begin{flushright}
        \emph{Flopsy, \\ Mopsy, \hphantom{sy,} \\ and Cotton-tail \hphantom{sy,sy,}}
      \end{flushright}
      \emph{were very jealous of Peter's new speech recognising computer}
    \end{minipage}
    {\tiny
      \begin{spacing}{0.5}
        ``Reading e-mail'' by Toms Bau\'{g}is [CC-BY-2.0 (http://creativecommons.org/licenses/by/2.0)], via flickr
      \end{spacing}
    }
    \note{A practical system would likely prompt the user to read sentences.\par}
    \note{I estimate I could perform the required training in as little as 1 to 10 minutes, depending on how many samples are required.\par}
  \end{frame}

  \section{Progress}
  \begin{frame}{Milestones and Progress}
    \Large
    $\checkmark$ Identify Problem \par
    $\checkmark$ Literature Review \par
    $\checkmark$ Develop Solution \par
    $\times$ Implement Solution \par
    $\times$ Test Solution \par
  \end{frame}
  \note{}

  \section{Conclusion}
  \subsection{}

  \begin{frame}{Plan of attack}
    \note{So to sum up, this thesis will determine the extent to which a single algorithm may be applied, investigating and quantifying performance against both human and machine listeners.\par}
    \note{I have proposed changes to existing systems and will investigate the improvements yielded using a phoneme-dependent algorithm.\par}
    \note{And finally, and most importantly, I hope to vastly reduce the amount of required training data for such NMF algorithms, in order to achieve a practical system that can be applied in the household.\par}
    \begin{itemize}
      \item<-3>{Verify these algorithms will be applicable to a broad range of practical situations, both for human and machine listeners.}
      \item{\color<1>{gray}Verify phoneme-dependent NMF algorithms can improve speech in babble.}
      \item{\color<-2>{gray}Verify phoneme-dependent NMF algorithms can reduce training requirements, thereby rendering a more practical system.}
    \end{itemize}
  \end{frame}

  \begin{frame}{No more ``cocktail party problem''}
    \centerline{\includegraphics[height = 6cm]{chart/loud.jpg}}
    {\tiny
      \begin{spacing}{0.5}
        ``I can't hear you'' by April Pink [CC-BY-SA-2.0 (http://creativecommons.org/licenses/by-sa/2.0)], via flickr
      \end{spacing}
    }
    \note{By addressing these three criteria, I hope to pave the way to bringing an end to the cocktail party problem, for humans and for machines.}
  \end{frame}

  \begin{frame}
    \center\fontsize{70pt}{1em}\selectfont ``Questions?''
    \note{progress pics from report? difference between me and raj? MOS method. }
  \end{frame}

  \appendix
  \newcounter{finalframe}
  \setcounter{finalframe}{\value{framenumber}}

  \begin{frame}
    \centerline{\includegraphics[height = 7cm]{chart/babbleSeparation.eps}}
    \note{Cherry identified 5 primary characteristics by which humans can distinguish desired speech.\par}
    %\note{Some of these parameters, such as spacial differences and visual cues, require extra data acquired by extra microphones or cameras, and so may not be considered practical.\par}
    \note{The most focused on characteristics are differences in voices and occasionally the transition probabilities.\par}
    \note{Transition probabilities just means using some context to guess what was said, for example if I said "How's your day been?", and you missed the last word, you could piece together the question.}
  \end{frame}

  \setcounter{framenumber}{\value{finalframe}}

\end{document}