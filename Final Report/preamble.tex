\usepackage[novbox]{pdfsync}

\usepackage{varioref}
\usepackage{cleveref}
\usepackage{varioref}

% Document Tree
\usepackage{tikz}

% Load csv files for data
\usepackage{csvsimple}

% pretty text in listings
\usepackage{color}
\definecolor{dkgreen}{RGB}{28, 172, 0}
\definecolor{lilas}{RGB}{170,55,241}
\definecolor{deepblue}{rgb}{0,0,0.5}
\definecolor{deepred}{rgb}{0.6,0,0}
\definecolor{deepgreen}{rgb}{0,0.5,0}
\usepackage[scaled]{beramono}
\usepackage[numbered]{sty/matlab-prettifier}
\lstdefinestyle{myBash}{language=bash,basicstyle=\ttfamily\small,breaklines=true}
\lstdefinestyle{myInline}{language=bash,basicstyle=\ttfamily\color{red}}
\lstset{style=myInline}

%\usepackage{pdflscape}

% LOF, LOT, LOS, etc. to TOC
%\usepackage[nottoc]{tocbibind}
%\def\nompreamble{\addcontentsline{toc}{chapter}{\nomname}\markboth{\nomname}{\nomname}}

% acronyms
\usepackage{acronym}
% allow acronym breaks (for formatting)
\makeatletter
\renewcommand*\AC@acs[1]{%
    \expandafter\AC@get\csname fn@#1\endcsname\@firstoftwo{#1}}
\makeatother

% a priori italics
\newcommand\apriori{\textit{a priori}}

% use instead of standard natbib to compress conecutive references
\usepackage[numbers, sort&compress]{natbib}

% capitalise references
\renewcommand{\figref}{\Figref}
%\renewcommand{\figref}[1]{\Vref{fig:#1}}
\renewcommand{\tabref}{\Tabref}
\renewcommand{\chapref}{\Chapref}
\renewcommand{\secref}[1]{\S~\ref{sec:#1}} 
\newcommand{\subsecref}[1]{\S~\ref{sub:#1}} 
\newcommand{\lstref}[1]{Listing~\ref{lst:#1}}
\newcommand{\algref}[1]{Algorithm~\ref{alg:#1}}

% automatically number all display equations
\renewcommand\[{\begin{equation}}
\renewcommand\]{\end{equation}}

% no paragraph gaps in lists
\setlist{noitemsep}

% format captions
\usepackage[labelfont=bf]{caption}
\captionsetup[table]{singlelinecheck=off,justification=justified} 

% equations use dashed numbering
\makeatletter
\long\def\theequation{\ifnum \c@chapter > \z@ \thechapter --\fi \@arabic \c@equation}

% all headings same, (no difference for chapter beginnings)
\let\ps@plain\ps@fancy

% make Lists use section, not Chapter
\renewcommand\listoffigures{%
    \section*{\listfigurename}%
      \@mkboth{\MakeUppercase\listfigurename}%
              {\MakeUppercase\listfigurename}%
    \@starttoc{lof}%
}
\renewcommand\listoftables{%
    \section*{\listtablename}%
      \@mkboth{\MakeUppercase\listtablename}%
              {\MakeUppercase\listtablename}%
    \@starttoc{lot}%
}
\renewcommand*{\listof}[2]{%
  \@ifundefined{ext@#1}{\float@error{#1}}{%
    \@namedef{l@#1}{\@dottedtocline{1}{1.5em}{2.3em}}%
    \section*{#2}%
    \begingroup\setlength{\parskip}{\z@}%
      \@starttoc{\@nameuse{ext@#1}}%
    \endgroup}}
\def\thenomenclature{%
  \section*{\nomname}
  \if@intoc\addcontentsline{toc}{section}{\nomname}\fi%

  \nompreamble
  \list{}{%
    \labelwidth\nom@tempdim
    \leftmargin\labelwidth
    \advance\leftmargin\labelsep
    \itemsep\nomitemsep
    \let\makelabel\nomlabel}}

% Document Tree
\newcount\dirtree@lvl
\newcount\dirtree@plvl
\newcount\dirtree@clvl
\def\dirtree@growth{%
  \ifnum\tikznumberofcurrentchild=1\relax
  \global\advance\dirtree@plvl by 1
  \expandafter\xdef\csname dirtree@p@\the\dirtree@plvl\endcsname{\the\dirtree@lvl}
  \fi
  \global\advance\dirtree@lvl by 1\relax
  \dirtree@clvl=\dirtree@lvl
  \advance\dirtree@clvl by -\csname dirtree@p@\the\dirtree@plvl\endcsname
  \pgf@xa=1cm\relax
  \pgf@ya=-0.7cm\relax
  \pgf@ya=\dirtree@clvl\pgf@ya
  \pgftransformshift{\pgfqpoint{\the\pgf@xa}{\the\pgf@ya}}%
  \ifnum\tikznumberofcurrentchild=\tikznumberofchildren
  \global\advance\dirtree@plvl by -1
  \fi
}
\tikzset{
  dirtree/.style={
    growth function=\dirtree@growth,
    growth parent anchor=south west,
    parent anchor=south west,
    every child node/.style={anchor=west},
    edge from parent path={([xshift=2ex] \tikzparentnode\tikzparentanchor) 
                           |- (\tikzchildnode\tikzchildanchor)}
  }
}
\makeatother

% rename nomenclature
 \renewcommand{\nomname}{List of Symbols}

% chapter title spacing
\usepackage{titlesec}
\titleformat{\chapter}[hang]{\normalfont\LARGE\bfseries}{\chaptertitlename \enspace \thechapter :}{20pt}{}{}
\titlespacing*{\chapter}{0pt}{-1cm}{0.5cm}

\clubpenalty=9999
\widowpenalty=9999

\makeatletter